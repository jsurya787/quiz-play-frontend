<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 pt-7">

  <!-- =======================
       MOBILE QUIZ INFO
       ======================= -->
  <form
    [formGroup]="quizForm"
    class="lg:hidden bg-white/80 backdrop-blur-md shadow-md rounded-b-3xl p-4"
  >
    <h2 class="text-lg font-bold text-indigo-600 mb-2">
      Create Quiz
    </h2>

    <!-- Title + Description -->
    <div class="space-y-3">
      <input
        class="input"
        placeholder="Quiz Title"
        formControlName="title"
      />

      <textarea
        rows="2"
        class="textarea"
        placeholder="Quiz Description"
        formControlName="description"
      ></textarea>

      <div class="grid grid-cols-2 gap-3">
        <select class="input" formControlName="subjectId">
          <option value="">Select Subject</option>
        @for (subject of subjects(); track subject._id) {
          <option [value]="subject._id">
            {{ subject.name }}
          </option>
        }
        </select>

        <select class="input" formControlName="difficulty">
          <option value="easy">Easy</option>
          <option value="medium">Medium</option>
        </select>

        <input
          class="input col-span-2"
          type="number"
          placeholder="Time (min)"
          formControlName="timeLimit"
        />
      </div>
    </div>

    <button
      type="button"
      class="mt-4 w-full btn-primary"
      (click)="saveDraft()"
    >
      Save Draft
    </button>
  </form>

  <!-- =======================
       DESKTOP LAYOUT
       ======================= -->
  <div class="max-w-7xl mx-auto p-4 flex gap-6">

    <!-- DESKTOP SIDEBAR -->
    <aside
      class="hidden lg:flex w-80 bg-white/70 backdrop-blur-lg
             rounded-3xl shadow-xl p-6 flex-col gap-6
             sticky top-6 h-fit"
    >
      <h2 class="text-2xl font-bold text-indigo-600">
        Create Quiz
      </h2>

      <form [formGroup]="quizForm" class="space-y-3">

        <input
          class="input"
          placeholder="Quiz Title"
          formControlName="title"
        />

        <!-- âœ… Description adjusted -->
        <textarea
          rows="3"
          class="textarea"
          placeholder="Quiz Description"
          formControlName="description"
        ></textarea>

        <select class="input" formControlName="subjectId">
          <option value="">Select Subject</option>
          <option
            *ngFor="let subject of subjects()"
            [value]="subject._id"
          >
            {{ subject.name }}
          </option>
        </select>

        <select class="input" formControlName="difficulty">
          <option value="easy">Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
        </select>

        <input
          class="input"
          type="number"
          placeholder="Time (min)"
          formControlName="timeLimit"
        />
      </form>

      <!-- SUMMARY -->
      <div class="bg-indigo-100 rounded-2xl p-4 text-sm">
        <p class="font-semibold">Quiz Summary</p>
        <p class="text-gray-600">
          Questions: {{ questionCount() }}
        </p>
        <p class="text-gray-600">
          Total Marks: {{ totalMarks() }}
        </p>
        <p class="text-gray-600">
          Total Time: {{ totalMarks() }}
        </p>
      </div>

      <button
        class="btn-primary mt-auto"
        type="button"
        (click)="saveDraft()"
      >
        Save Draft
      </button>
    </aside>

    <!-- =======================
         MAIN BUILDER
         ======================= -->
    <main class="flex-1 space-y-6">

      <!-- HEADER -->
      <div class="bg-white/70 backdrop-blur-lg rounded-3xl shadow-lg p-6">
        <h1 class="text-2xl font-bold">Quiz Builder</h1>
        <p class="text-gray-500 text-sm">
          Create engaging questions with ease
        </p>
      </div>

      <!-- QUESTION CARD -->
      <form
        [formGroup]="questionForm"
        class="bg-white rounded-3xl shadow-xl
               p-6 space-y-4 animate-fade-in"
      >
        <div class="flex justify-between items-center">
          <h2 class="font-semibold text-lg">
            Question {{ questionCount() + 1 }}
          </h2>
          <span class="badge">+4 Marks</span>
        </div>

        <textarea
          rows="3"
          placeholder="Type your question..."
          class="textarea"
          formControlName="questionText"
        ></textarea>

        <!-- OPTIONS -->
        <div
          class="grid sm:grid-cols-2 gap-4"
          formArrayName="options"
        >
          <div
            class="option"
            *ngFor="let _ of options.controls; let i = index"
            [formGroupName]="i"
          >
            <input
              type="radio"
              name="correct"
              (change)="selectCorrectOption(i)"
            />
            <input
              placeholder="Option {{ i + 1 }}"
              formControlName="text"
            />
          </div>
        </div>

        <!-- ACTIONS -->
        <div class="flex justify-between items-center">
          <button type="button" class="text-red-500 hover:underline">
            Delete
          </button>

          <button
            type="button"
            class="btn-primary"
            (click)="saveQuestion()"
          >
            Save Question
          </button>
        </div>
      </form>

      <!-- ADD QUESTION -->
      <button
        class="w-full border-2 border-dashed border-indigo-400
               py-5 rounded-3xl text-indigo-600
               font-semibold hover:bg-indigo-100 transition"
      >
        + Add Another Question
      </button>

      <!-- PUBLISH -->
      <div class="flex justify-end">
        <button class="btn-success" (click)="publishQuiz()">
          Publish Quiz ðŸš€
        </button>
      </div>

    </main>
  </div>
</div>
