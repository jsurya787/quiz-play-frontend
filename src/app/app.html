<!-- ================= LOADER ================= -->
@if (_loaderService.loading()) {
  <app-loader />
}

<!-- ================= HEADER ================= -->
<header class="fixed top-0 left-0 w-full z-50 transition-all duration-300">
  
  <!-- Background Layer (Blur/Shadow) -->
  <div class="absolute inset-0 bg-white/80 backdrop-blur-2xl border-b border-gray-100 shadow-[0_1px_3px_rgba(0,0,0,0.04)]"></div>

  <!-- Content Layer -->
  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 sm:h-16 flex items-center justify-between">

    <!-- ======= LOGO ======= -->
    <div
      class="flex items-center gap-2.5
             text-lg sm:text-xl font-bold
             text-gray-900 cursor-pointer
             transition-all duration-200
             hover:opacity-80"
      [routerLink]="['']">
      
      <!-- Logo Icon -->
      <div class="flex items-center justify-center
                  w-9 h-9 rounded-full
                  bg-gradient-to-br from-indigo-500 via-indigo-600 to-purple-700
                  shadow-lg shadow-indigo-500/40
                  ring-2 ring-indigo-400/20">
        <span class="text-sm font-black tracking-tight">
          <span class="text-amber-300">Q</span><span class="text-white">P</span>
        </span>
      </div>
      
      <!-- Brand Name -->
      <span class="tracking-tight">
        Quiz<span class="text-indigo-600">Play</span>
      </span>
    </div>

    <!-- ======= RIGHT ACTIONS ======= -->
    <div class="flex items-center gap-2 sm:gap-3">

      <!-- ðŸ” NOT AUTHENTICATED -->
      @if (!_authService.isAuthenticated()) {

        <!-- Login Link -->
        <button
          class="px-3 py-1.5
                 text-sm font-medium text-gray-600
                 rounded-lg
                 hover:text-gray-900 hover:bg-gray-50
                 transition-all duration-200"
          [routerLink]="['/login']">
          Log in
        </button>

        <!-- Divider -->
        <span class="hidden sm:block h-5 w-px bg-gray-200"></span>

        <!-- Primary CTA -->
        <button
          class="inline-flex items-center gap-1.5
                 px-4 sm:px-5
                 py-2 sm:py-2.5
                 text-sm font-semibold text-white
                 rounded-xl bg-indigo-600
                 shadow-md shadow-indigo-500/25
                 transition-all duration-200
                 hover:bg-indigo-700 hover:shadow-lg hover:shadow-indigo-500/30
                 hover:-translate-y-0.5
                 active:scale-95"
          [routerLink]="['/dashboard/all']">
          Start Playing
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </button>

      }

      <!-- ðŸ‘¤ AUTHENTICATED -->
      @else {

        <!-- Premium User Avatar Button -->
        <button
          class="group relative h-10 w-10 rounded-full
                 bg-gradient-to-br from-indigo-500 to-purple-600
                 flex items-center justify-center
                 text-white shadow-lg shadow-indigo-500/30
                 ring-2 ring-white ring-offset-2 ring-offset-gray-50
                 transition-all duration-300
                 hover:scale-105 hover:shadow-indigo-500/50
                 active:scale-95"
          (click)="isUserMenuOpen = true"
          aria-label="User menu">
            
          <!-- User Icon -->
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>

          <!-- Notification Dot -->
          <span class="absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-white transform scale-0 opacity-0 group-hover:scale-100 group-hover:opacity-100 transition-all duration-300"></span>
        </button>

      }
      
      <!-- ================= USER MENU ================= -->
      <div class="relative">
        <app-user-menu
          [open]="isUserMenuOpen"
          (close)="isUserMenuOpen = false">
        </app-user-menu>
      </div>

    </div>
  </div>
</header>

<!-- ================= PAGE CONTENT ================= -->
<main class="min-h-screen">
  <router-outlet></router-outlet>
  <app-toast></app-toast>
</main>
